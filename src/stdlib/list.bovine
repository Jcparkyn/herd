
!{ range } = import '@basics';

push = \arr element\ NATIVE:push arr element;

pop = \arr\ NATIVE:pop arr;

len = \val\ NATIVE:len val;

sort = \arr\ NATIVE:sort arr;

map = \var arr f\ (
  l = len arr;
  for i in range 0 l do (
    set arr.[i] = f arr.[i];
  )
  arr
);

filter = \arr f\ (
  var result = [];
  for item in arr do (
    if f item then (
      set result |= push item;
    )
  )
  result
);

return {
  push,
  pop,
  len,
  sort,
  map,
  filter,
};
